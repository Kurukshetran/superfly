<?xml version="1.0"?>
<!DOCTYPE Configure PUBLIC "-//Mort Bay Consulting//DTD Configure//EN" "http://jetty.mortbay.org/configure.dtd">

<Configure id='wac' class="org.mortbay.jetty.webapp.WebAppContext">

    <New id="txDatasource" class="org.mortbay.jetty.plus.naming.Resource">
        <Arg>java:/comp/env/jdbc/superfly</Arg>
        <Arg>
            <New class="org.apache.commons.dbcp.BasicDataSource">
                <Set name="url">jdbc:mysql://localhost:3306/sso?autoReconnect=false&amp;characterEncoding=utf8</Set>
                <Set name="driverClassName">com.mysql.jdbc.Driver</Set>
                <Set name="username">sso</Set>
                <Set name="password">123sso123</Set>
                <Set name="accessToUnderlyingConnectionAllowed">true</Set>
                <Set name="testOnBorrow">true</Set>
                <Set name="validationQuery">{call create_collections()}</Set>
                <!--<property name="maxActive" value="-1"      />-->
                <!--<property name="maxIdle"   value="2"       />-->
                <!--<property name="maxWait"   value="5000"    />-->
            </New>
        </Arg>
    </New>
    
    <New id="mailSession" class="org.mortbay.jetty.plus.naming.Resource">
        <Arg>java:/comp/env/mail/Session-0</Arg>
        <Arg>
			<New class="org.mortbay.naming.factories.MailSessionReference">
				<Set name="user">some.test@gmail.com</Set>
				<Set name="password">some.password</Set>
				<Set name="properties">
					<New class="java.util.Properties">
						<Put name="mail.smtp.host">smtp.gmail.com</Put>
						<Put name="mail.smtp.auth">true</Put>
						<Put name="mail.smtp.user">some.test@gmail.com</Put>
						<Put name="mail.debug">true</Put>
						<Put name="mail.smtp.socketFactory.port">465</Put>
						<Put name="mail.smtp.socketFactory.class">javax.net.ssl.SSLSocketFactory</Put>
						<Put name="mail.smtp.socketFactory.fallback">false</Put>
					</New>
				</Set>
			</New>
        </Arg>
    </New>

</Configure>


